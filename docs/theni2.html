<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TamilTheni - Theni 2</title>
    <link rel="stylesheet" href="assets/css/theni2.css">
</head>

<body>

    <div class="control-panel" id="controlPanel">
        <div class="control-header" onclick="toggleControlPanel()">
            <h3><span>‚öôÔ∏è</span> ‡Æ™‡Æø‡ÆØ‡Øã‡Æ∞‡Æø‡ÆØ‡Ææ ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç‡Æ™‡Øç ‡Æ™‡Æ≥‡Øç‡Æ≥‡Æø - ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç‡Æ§‡Øç ‡Æ§‡Øá‡Æ©‡Æø 2026 - Theni 2</h3>
            <span class="toggle-icon">‚ñº</span>
        </div>
        <div class="control-content">
            <div class="control-row">
                <span class="control-label">Categories:</span>
                <div class="category-dropdown">
                    <button class="dropdown-button" onclick="toggleDropdown(event)">
                        <span id="selectedCatText">All Categories</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="dropdown-menu" id="categoryMenu">
                        <div class="dropdown-item header" onclick="toggleAllCategories(event)">
                            <input type="checkbox" id="selectAllCats" checked>
                            <span>Select All / None</span>
                        </div>
                        <div id="categoryList">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="control-row">
                <span class="control-label">Difficulty:</span>
                <div class="pill-group">
                    <button class="pill-button active" onclick="filterDifficulty('all')" id="filterAll">All</button>
                    <button class="pill-button" onclick="filterDifficulty('D1')" id="filterD1">D1 Only</button>
                    <button class="pill-button" onclick="filterDifficulty('D2')" id="filterD2">D2 Only</button>
                </div>
            </div>
            <div class="control-row">
                <span class="control-label">Sequence:</span>
                <div class="pill-group">
                    <button class="action-button" onclick="shuffleSlides()"><span>üîÄ</span> Shuffle</button>
                    <button class="action-button" onclick="resetSequence()"><span>‚Ü©Ô∏è</span> Reset</button>
                </div>
                <div style="margin-left: auto; display: flex; gap: 15px;">
                    <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.85em;">
                        <input type="checkbox" id="showTimer" onchange="toggleTimerVisibility()" checked> ‚è±Ô∏è Timer (20s)
                    </label>
                    <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.85em;">
                        <input type="checkbox" id="audioToggle" onchange="toggleAudio()"> üîä Audio
                    </label>
                </div>
            </div>
            <div class="control-row">
                <span class="control-label">Progress:</span>
                <span class="progress-info" id="progressInfo">Loading...</span>
                <div style="margin-left: auto; display: flex; align-items: center; gap: 6px;">
                    <span style="font-size: 0.8em;">üîë Gemini AI API:</span>
                    <input type="password" id="apiKeyInput" placeholder="Enter API Key"
                        style="padding: 4px 8px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.15); color: white; width: 140px; font-size: 0.8em;"
                        onchange="saveApiKey(this.value)">
                    <span id="keyStatus" style="font-size: 0.75em; color: #90EE90; display: none;">‚úì</span>
                </div>
            </div>
            <div class="control-row"
                style="margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                <a href="index.html" class="action-button"
                    style="text-decoration: none; background: rgba(255,255,255,0.1); width: 100%; justify-content: center;">
                    <span>üè†</span> Back to Portal Home
                </a>
            </div>
        </div>
    </div>

    <div class="slide-container">
        <div class="progress" id="progressBar" style="width: 0%"></div>

        <div id="slides-wrapper" class="dual-mode">

            <!-- Dual View Container -->
            <div id="dualViewContainer" style="padding-bottom: 160px;">
                <!-- AI Generator Section (Side-by-Side) -->
                <div
                    style="margin-bottom: 20px; display: flex; flex-direction: row; align-items: center; justify-content: flex-start; gap: 20px; width: 100%; max-width: 800px; flex-wrap: wrap;">

                    <button class="action-button" onclick="generateSentence()" id="aiBtn"
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); width: auto; padding: 12px 24px; font-weight: 600; white-space: nowrap; height: 100%; min-height: 50px;">
                        <span>‚ú®</span> Generate Sentence
                    </button>

                    <div id="aiResult"
                        style="flex: 1; min-width: 300px; padding: 10px 20px; background: rgba(255,255,255,0.95); border-radius: 12px; display: none; align-items: center; justify-content: center; border: 1px solid rgba(118, 75, 162, 0.2); box-shadow: 0 4px 6px rgba(0,0,0,0.05); min-height: 50px;">
                        <div style="text-align: left;">
                            <div id="aiText" style="font-size: 1.1em; color: #333; font-weight: 600; line-height: 1.4;">
                            </div>
                            <div id="aiTextEn"
                                style="font-size: 0.95em; color: #666; font-style: italic; margin-top: 4px;"></div>
                        </div>
                    </div>
                </div>

                <div class="dual-view-container">
                    <div class="dual-word-card" id="card1">
                        <div class="card-image">
                            <img id="card1Img" src="https://placehold.co/300x180?text=Loading..." alt="">
                        </div>
                        <div class="word-en" id="card1En">Word 1</div>
                        <div class="word-ta" id="card1Ta">‡Æö‡Øä‡Æ≤‡Øç 1</div>
                        <div class="category-badges">
                            <span class="card-badge category-label" id="card1Cat">Category</span>
                            <span class="card-badge category-label-ta" id="card1CatTa">‡Æµ‡Æï‡Øà</span>
                        </div>
                        <span class="card-badge difficulty-badge-corner left" id="card1Diff">D1</span>
                    </div>
                    <div class="dual-word-card" id="card2">
                        <div class="card-image">
                            <img id="card2Img" src="https://placehold.co/300x180?text=Loading..." alt="">
                        </div>
                        <div class="word-en" id="card2En">Word 2</div>
                        <div class="word-ta" id="card2Ta">‡Æö‡Øä‡Æ≤‡Øç 2</div>
                        <div class="category-badges">
                            <span class="card-badge category-label" id="card2Cat">Category</span>
                            <span class="card-badge category-label-ta" id="card2CatTa">‡Æµ‡Æï‡Øà</span>
                        </div>
                        <span class="card-badge difficulty-badge-corner right" id="card2Diff">D2</span>
                    </div>
                </div>
            </div>

            <div class="navigation">
                <button id="firstBtn" onclick="goToFirst(); event.stopPropagation();" disabled
                    title="First Slide (Home)">‚èÆ</button>
                <button id="prevBtn" onclick="changeSlide(-1); event.stopPropagation();" disabled
                    title="Previous Slide (‚Üê)">‚óÄ</button>
                <span style="align-self: center; color: #757575; font-weight: 600; min-width: 80px; text-align: center;"
                    id="counter">1 / 800</span>
                <button id="nextBtn" onclick="handleNextAction(); event.stopPropagation();"
                    title="Next / Reveal (‚Üí, Space)">‚ñ∂</button>
                <button id="lastBtn" onclick="goToLast(); event.stopPropagation();" title="Last Slide (End)">‚è≠</button>
            </div>

            <div class="circular-timer" id="timerPill" style="display:none;">
                <div class="timer-visual" id="timerPie"></div>
                <div class="timer-content">
                    <div class="timer-display" id="timerDisplay">00:20</div>
                    <button class="timer-btn" id="timerBtn" onclick="toggleTimer()">‚ñ∂</button>
                </div>
            </div>

        </div>
    </div>

    <script src="assets/data/theni2_data.js"></script>
    <script src="assets/js/theni2.js" defer></script>
</body>

</html>