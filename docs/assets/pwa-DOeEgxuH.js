(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();const a={registration:null,init:function(){if(!("serviceWorker"in navigator)){console.log("[PWA] Service workers not supported");return}},registerServiceWorker:function(){navigator.serviceWorker.register("/tamiltheni/sw.js",{scope:"/tamiltheni/"}).then(r=>{console.log("[PWA] SW registered:",r.scope),this.registration=r,r.onupdatefound=()=>{const n=r.installing;n!=null&&(n.onstatechange=()=>{n.state==="installed"&&(navigator.serviceWorker.controller?(console.log("[PWA] New content is available; please refresh."),this.showUpdateNotification()):console.log("[PWA] Content is cached for offline use."))})}}).catch(r=>{console.error("[PWA] SW registration failed:",r)});let i=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{i||(window.location.reload(),i=!0)})},showUpdateNotification:function(){const o=document.createElement("div");o.id="pwa-update-notification",o.className="pwa-update-banner",o.style.cssText="position: fixed; bottom: 20px; right: 20px; background: #333; color: white; padding: 15px; border-radius: 8px; z-index: 9999; display: flex; gap: 10px; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.3);",o.innerHTML=`
            <span>ðŸ”„ New version available!</span>
            <button id="pwa-refresh" style="background: #4CAF50; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Refresh</button>
            <button id="pwa-dismiss" style="background: transparent; color: #aaa; border: none; cursor: pointer; font-size: 1.2em;">&times;</button>
        `,document.body.appendChild(o),document.getElementById("pwa-refresh")?.addEventListener("click",()=>{this.registration&&this.registration.waiting?this.registration.waiting.postMessage({type:"SKIP_WAITING"}):window.location.reload()}),document.getElementById("pwa-dismiss")?.addEventListener("click",()=>{o.remove()})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>a.init()):a.init();
