const o={synth:window.speechSynthesis,isMuted:!1,init:function(){this.synth.onvoiceschanged!==void 0&&(this.synth.onvoiceschanged=()=>{this.getVoice("ta-IN")}),this.setupAudioUnlock()},setupAudioUnlock:function(){const e=()=>{this.synth.paused&&this.synth.resume();const t=new SpeechSynthesisUtterance("");t.volume=0,this.synth.speak(t),document.removeEventListener("click",e,{capture:!0}),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e,{capture:!0}),console.log("[AudioManager] Audio unlock triggered.")};document.addEventListener("click",e,{capture:!0}),document.addEventListener("keydown",e),document.addEventListener("touchstart",e,{capture:!0})},speak:function(e,t="ta-IN"){if(console.log(`[AudioManager] Request to speak: "${e}" in ${t}`),this.isMuted){console.log("[AudioManager] Speaker is muted.");return}this.synth.speaking&&this.synth.cancel();const n=new SpeechSynthesisUtterance(e);n.lang=t,n.rate=.9;const i=this.getVoice(t);i?(n.voice=i,console.log(`[AudioManager] Using voice: ${i.name}`)):console.warn(`[AudioManager] No specific voice found for ${t}, using browser default.`),n.onerror=s=>console.error("[AudioManager] Utterance error:",s),this.synth.speak(n)},getVoice:function(e){const t=this.synth.getVoices();let n=t.find(i=>i.lang===e&&i.name.includes("Google"));if(n||(n=t.find(i=>i.lang===e)),!n&&e.includes("-")){const i=e.split("-")[0];n=t.find(s=>s.lang.startsWith(i))}return n},toggleMute:function(){return this.isMuted=!this.isMuted,this.isMuted},setMuted:function(e){this.isMuted=e}};window.speechSynthesis&&o.init();export{o as A};
