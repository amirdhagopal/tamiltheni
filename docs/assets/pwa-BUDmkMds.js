(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();const a={registration:null,init:function(){if(!("serviceWorker"in navigator)){console.log("[PWA] Service workers not supported");return}this.registerServiceWorker()},registerServiceWorker:function(){const o=window.location.pathname.includes("/html/")?"../":"./",n=`${o}sw.js`;navigator.serviceWorker.register(n,{scope:o}).then(e=>{console.log("[PWA] SW registered:",e.scope),this.registration=e,e.onupdatefound=()=>{const t=e.installing;t!=null&&(t.onstatechange=()=>{t.state==="installed"&&(navigator.serviceWorker.controller?(console.log("[PWA] New content is available; please refresh."),this.showUpdateNotification()):console.log("[PWA] Content is cached for offline use."))})}}).catch(e=>{console.error("[PWA] SW registration failed:",e)});let i=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{i||(window.location.reload(),i=!0)})},showUpdateNotification:function(){const r=document.createElement("div");r.id="pwa-update-notification",r.className="pwa-update-banner",r.style.cssText="position: fixed; bottom: 20px; right: 20px; background: #333; color: white; padding: 15px; border-radius: 8px; z-index: 9999; display: flex; gap: 10px; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.3);",r.innerHTML=`
            <span>ðŸ”„ New version available!</span>
            <button id="pwa-refresh" style="background: #4CAF50; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Refresh</button>
            <button id="pwa-dismiss" style="background: transparent; color: #aaa; border: none; cursor: pointer; font-size: 1.2em;">&times;</button>
        `,document.body.appendChild(r),document.getElementById("pwa-refresh")?.addEventListener("click",()=>{this.registration&&this.registration.waiting?this.registration.waiting.postMessage({type:"SKIP_WAITING"}):window.location.reload()}),document.getElementById("pwa-dismiss")?.addEventListener("click",()=>{r.remove()})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>a.init()):a.init();
