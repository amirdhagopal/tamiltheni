const o={synth:window.speechSynthesis,isMuted:!1,init:function(){this.synth.onvoiceschanged!==void 0&&(this.synth.onvoiceschanged=()=>{this.getVoice("ta-IN")}),this.setupAudioUnlock()},setupAudioUnlock:function(){const e=()=>{this.synth.paused&&this.synth.resume();const n=new SpeechSynthesisUtterance("");n.volume=0,this.synth.speak(n),document.removeEventListener("click",e,{capture:!0}),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e,{capture:!0}),console.log("[AudioManager] Audio unlock triggered.")};document.addEventListener("click",e,{capture:!0}),document.addEventListener("keydown",e),document.addEventListener("touchstart",e,{capture:!0})},currentUtterance:null,speak:function(e,n="ta-IN"){if(console.log(`[AudioManager] Request to speak: "${e}" in ${n}`),this.isMuted){console.log("[AudioManager] Speaker is muted.");return}this.synth.speaking&&this.synth.cancel();const t=new SpeechSynthesisUtterance(e);this.currentUtterance=t,t.lang=n,t.rate=.9,t.onend=()=>{this.currentUtterance=null};const i=this.getVoice(n);i?(t.voice=i,console.log(`[AudioManager] Using voice: ${i.name}`)):console.warn(`[AudioManager] No specific voice found for ${n}, using browser default.`),t.onerror=s=>{console.error("[AudioManager] Utterance error:",s),this.currentUtterance=null},this.synth.speak(t)},getVoice:function(e){const n=this.synth.getVoices();let t=n.find(i=>i.lang===e&&i.name.includes("Google"));if(t||(t=n.find(i=>i.lang===e)),!t&&e.includes("-")){const i=e.split("-")[0];t=n.find(s=>s.lang.startsWith(i))}return t},toggleMute:function(){return this.isMuted=!this.isMuted,this.isMuted},setMuted:function(e){this.isMuted=e}};window.speechSynthesis&&o.init();export{o as A};
